{
  "mode": "patch",
  "files": [
    {
      "path": "src/cli.ts",
      "content": "import * as fs from \"node:fs\";\nimport * as path from \"node:path\";\nimport { TaskStore } from \"./store\";\n\nfunction help() {\n    console.log(`Usage:\n  list --data <path>\n  add <title> --data <path>\n  done <id> --data <path>\n  remove <id> --data <path>`);\n}\n\nasync function main(args: string[]) {\n    const command = args[0];\n    const dataPathIndex = args.indexOf(\"--data\");\n    if (dataPathIndex === -1 || !args[dataPathIndex + 1]) {\n        console.error(\"Missing --data <path>\");\n        process.exit(1);\n    }\n    const dataPath = args[dataPathIndex + 1];\n    const store = new TaskStore(dataPath);\n\n    switch (command) {\n        case \"--help\":\n            help();\n            process.exit(0);\n        case \"list\":\n            const tasks = await store.list();\n            console.log(JSON.stringify({ ok: true, tasks }));\n            break;\n        case \"add\":\n            if (!args[1] || args[1].startsWith(\"--\")) {\n                console.error(\"Missing title\");\n                process.exit(1);\n            }\n            const task = await store.add(args[1]);\n            console.log(JSON.stringify({ ok: true, task }));\n            break;\n        case \"done\":\n            if (!args[1] || args[1].startsWith(\"--\")) {\n                console.error(\"Missing id\");\n                process.exit(1);\n            }\n            const doneTask = await store.done(args[1]);\n            console.log(JSON.stringify({ ok: true, task: doneTask }));\n            break;\n        case \"remove\":\n            if (!args[1] || args[1].startsWith(\"--\")) {\n                console.error(\"Missing id\");\n                process.exit(1);\n            }\n            const removedTask = await store.remove(args[1]);\n            console.log(JSON.stringify({ ok: true, task: removedTask }));\n            break;\n        default:\n            console.error(`Unknown command: ${command}`);\n            process.exit(1);\n    }\n}\n\nmain(process.argv.slice(2)).catch((err) => {\n    console.error(err);\n    process.exit(1);\n});\n"
    }
  ],
  "notes": "Fixed the issue with the help command not exiting properly and ensured the CLI handles commands correctly."
}