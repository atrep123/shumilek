{
  "mode": "patch",
  "files": [
    {
      "path": "dist/cli.js",
      "content": "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst store_1 = require(\"./store\");\nfunction help() {\n    console.log(`Usage:\\n  list --data <path>\\n  add <title> --data <path>\\n  done <id> --data <path>\\n  remove <id> --data <path>`);\n}\nasync function main(args) {\n    const command = args[0];\n    const dataPathIndex = args.indexOf(\"--data\");\n    if (command === \"--help\") {\n        help();\n        process.exit(0);\n    }\n    if (dataPathIndex === -1 || !args[dataPathIndex + 1]) {\n        console.error(\"Missing --data <path>\");\n        process.exit(1);\n    }\n    const dataPath = args[dataPathIndex + 1];\n    const store = new store_1.TaskStore(dataPath);\n    switch (command) {\n        case \"list\":\n            const tasks = await store.list();\n            console.log(JSON.stringify({ ok: true, tasks }));\n            break;\n        case \"add\":\n            if (!args[1] || args[1].startsWith(\"--\")) {\n                console.error(\"Missing title\");\n                process.exit(1);\n            }\n            const task = await store.add(args[1]);\n            console.log(JSON.stringify({ ok: true, task }));\n            break;\n        case \"done\":\n            if (!args[1] || args[1].startsWith(\"--\")) {\n                console.error(\"Missing id\");\n                process.exit(1);\n            }\n            const doneTask = await store.done(args[1]);\n            console.log(JSON.stringify({ ok: true, task: doneTask }));\n            break;\n        case \"remove\":\n            if (!args[1] || args[1].startsWith(\"--\")) {\n                console.error(\"Missing id\");\n                process.exit(1);\n            }\n            const removedTask = await store.remove(args[1]);\n            console.log(JSON.stringify({ ok: true, task: removedTask }));\n            break;\n        default:\n            console.error(`Unknown command: ${command}`);\n            process.exit(1);\n    }\n}\nmain(process.argv.slice(2)).catch((err) => {\n    console.error(err);\n    process.exit(1);\n});\n"
    },
    {
      "path": "src/cli.ts",
      "content": "import { TaskStore } from \"./store\";\n\nfunction help() {\n    console.log(`Usage:\\n  list --data <path>\\n  add <title> --data <path>\\n  done <id> --data <path>\\n  remove <id> --data <path>`);\n}\n\nasync function main(args: string[]) {\n    const command = args[0];\n    const dataPathIndex = args.indexOf(\"--data\");\n    if (command === \"--help\") {\n        help();\n        process.exit(0);\n    }\n    if (dataPathIndex === -1 || !args[dataPathIndex + 1]) {\n        console.error(\"Missing --data <path>\");\n        process.exit(1);\n    }\n    const dataPath = args[dataPathIndex + 1];\n    const store = new TaskStore(dataPath);\n    switch (command) {\n        case \"list\":\n            const tasks = await store.list();\n            console.log(JSON.stringify({ ok: true, tasks }));\n            break;\n        case \"add\":\n            if (!args[1] || args[1].startsWith(\"--\")) {\n                console.error(\"Missing title\");\n                process.exit(1);\n            }\n            const task = await store.add(args[1]);\n            console.log(JSON.stringify({ ok: true, task }));\n            break;\n        case \"done\":\n            if (!args[1] || args[1].startsWith(\"--\")) {\n                console.error(\"Missing id\");\n                process.exit(1);\n            }\n            const doneTask = await store.done(args[1]);\n            console.log(JSON.stringify({ ok: true, task: doneTask }));\n            break;\n        case \"remove\":\n            if (!args[1] || args[1].startsWith(\"--\")) {\n                console.error(\"Missing id\");\n                process.exit(1);\n            }\n            const removedTask = await store.remove(args[1]);\n            console.log(JSON.stringify({ ok: true, task: removedTask }));\n            break;\n        default:\n            console.error(`Unknown command: ${command}`);\n            process.exit(1);\n    }\n}\n\nmain(process.argv.slice(2)).catch((err) => {\n    console.error(err);\n    process.exit(1);\n});\n"
    }
  ],
  "notes": "Fixed the help command to return with code 0 and ensured the TypeScript source is consistent with the compiled JavaScript."
}