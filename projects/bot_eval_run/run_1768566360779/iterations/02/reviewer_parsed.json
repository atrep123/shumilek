{
  "mode": "full",
  "files": [
    {
      "path": "README.md",
      "content": ""
    },
    {
      "path": "package.json",
      "content": "name: todo-app\nversion: 1.0.0\nmain: dist/cli.js\nscripts: {}\ntype: module"
    },
    {
      "path": "tsconfig.json",
      "content": "rootDir: src\nemit: true\nclean: true\noutDir: dist\nmoduleResolution: node\nlib:\n  - esnext\n  - dom\nmodule: commonjs\nstrict: true\nnoImplicitReturns: true\nnoFallthroughCasesInSwitch: true"
    },
    {
      "path": "src/store.ts",
      "content": "import { Task } from './task';\nexport class TaskStore {\n  private dataPath: string;\n  constructor(filePath: string) {\n    this.dataPath = filePath;\n  }\n\n  list(): Task[] {\n    const tasks: any[] = JSON.parse(fs.readFileSync(this.dataPath, 'utf8'));\n    return tasks.map(task => ({ id: task.id, title: task.title, done: task.done ? true : false }));\n  }\n\n  add(title: string): Task {\n    const newTask: Task = { id: uuidv4(), title, done: false, createdAt: new Date().toISOString() };\n    const tasks = this.list();\n    tasks.push(newTask);\n    fs.writeFileSync(this.dataPath, JSON.stringify(tasks), 'utf8');\n    return newTask;\n  }\n\n  done(id: string): Task {\n    const tasks = this.list();\n    const taskIndex = tasks.findIndex(task => task.id === id);\n    if (taskIndex !== -1) {\n      tasks[taskIndex].done = true;\n      tasks[taskIndex].doneAt = new Date().toISOString();\n      fs.writeFileSync(this.dataPath, JSON.stringify(tasks), 'utf8');\n    }\n    return tasks[taskIndex];\n  }\n\n  remove(id: string): Task {\n    const tasks = this.list();\n    const taskIndex = tasks.findIndex(task => task.id === id);\n    if (taskIndex !== -1) {\n      const updatedTasks = tasks.filter((_, index) => index !== taskIndex);\n      fs.writeFileSync(this.dataPath, JSON.stringify(updatedTasks), 'utf8');\n      return updatedTasks[0];\n    }\n    return null;\n  }\n}\n\nimport { Task } from './task';\nexport const uuidv4 = () => {\n  let id = require("
    },
    {
      "id": "uuid"
    },
    "\n  let s4 = () => (Math.floor((1 + Math.random()) * 0x10000) % 16 | 0).toString(16); // random number between 0 and 15\n  return s4() + s4() + '-' + s4() + '-' + s4() + '-' + s4() + '-' + s4() + s4() + s4();\n};\n\nimport { Task } from './task';\nexport class Task {\n  id: string;\n  title: string;\n  done: boolean;\n  createdAt: Date;\n  constructor(id: string, title: string) {\n    this.id = id;\n    this.title = title;\n    this.done = false;\n    this.createdAt = new Date();\n  }\n} "
  ],
  "path": "src/cli.ts",
  "content": "import { TaskStore } from './store';\n\nconst store = new TaskStore('tasks.json');\n\nasync function main() {\n  if (process.argv[2] === '--help') {\n    console.log(`Usage: ${require('path').basename(process.argv[0])} [add | remove <id> | done <id>]`);\n    process.exit(0);\n  }\n\neach(arg) => {\n    if (arg.startsWith('--')) {\n      return;\n    } else if (arg === 'list') {\n      const tasks = store.list();\n      console.log(tasks.join('\n') || '[No tasks found]');\n    } else if (arg.startsWith('add')) {\n      const title = arg.replace('add', '').trim();\n      const task = await store.add(title);\n      console.log(`Added: ${task.title} (${task.id})`);\n    } else if (arg.startsWith('remove') && arg.length > 5) {\n      const idArg = arg.substring(6);\n      const id = parseInt(idArg, 10);\n      const taskToRemove = store.remove(id);\n      if (!taskToRemove) {\n        console.error(`Task with ID ${id} not found`);\n      } else {\n        console.log(`Removed: ${taskToRemove.title}`);\n      }\n    } else if (arg.startsWith('done') && arg.length > 4) {\n      const idArg = arg.substring(5);\n      const id = parseInt(idArg, 10);\n      const task = store.done(id);\n      if (!task) {\n        console.error(`Task with ID ${id} not found`);\n      } else {\n        console.log(`Marked as done: ${task.title}`);\n      }\n    }\n  }\n}\n\nmain().catch(console.error); "
}