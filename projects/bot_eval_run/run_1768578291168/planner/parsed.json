{
  "mode": "full",
  "files": [
    {
      "path": "README.md",
      "content": "A Node.js Todo API built with CommonJS and Node.js builtin modules. It provides a REST API for managing TODO items and passes Oracle tests.\n"
    },
    {
      "path": "package.json",
      "content": "{\"name\": \"todo-api\", \"version\": \"1.0.0\", \"type\": \"commonjs\", \"main\": \"src/server.js\"}\n"
    },
    {
      "path": "openapi.json",
      "content": "{\"openapi\": \"3.0.0\",\"info\":{\"title\":\"Todo API\",\"version\":\"1.0.0\",\"description\":\"A simple Todo API\"},\"servers\":[{\"url\":\"/\"}],'paths':{\"/health\":{\"get\":{\"responses\":{\"200\":{\"description\":\"OK\",\"content\":{\"application/json\":{\"schema\":{\"properties\":{\"ok\":{\"type\":\"boolean\"}}}}}}}}},\"/todos\":{\"get\":{\"responses\":{\"200\":{\"description\":\"OK\",\"content\":{\"application/json\":{\"schema\":{\"properties\":{\"ok\":{\"type\":\"boolean\"},\"todos\":{\"type\":\"array\"}}}}}}}}},\"post\":{\"responses\":{\"201\":{\"description\":\"Created\",\"content\":{\"application/json\":{\"schema\":{\"properties\":{\"ok\":{\"type\":\"boolean\"},\"todo\":{\"type\":\"object\"}}}}}}}}},\"/{id}\":{\"get\":{\"responses\":{\"200\":{\"description\":\"OK\",\"content\":{\"application/json\":{\"schema\":{\"properties\":{\"ok\":{\"type\":\"boolean\"},\"todo\":{\"type\":\"object\"}}}}},\"404\":{\"description\":\"Not Found\",\"content\":{\"application/json\":{\"schema\":{\"properties\":{\"ok\":{\"type\":\"boolean\"},\"error\":{\"type\":\"string\"}}}}}}},\"delete\":{\"responses\":{\"200\":{\"description\":\"OK\",\"content\":{\"application/json\":{\"schema\":{\"properties\":{\"ok\":{\"type\":\"boolean\"}}}}}}},\"patch\":{\"responses\":{\"200\":{\"description\":\"OK\",\"content\":{\"application/json\":{\"schema\":{\"properties\":{\"ok\":{\"type\":\"boolean\"},\"todo\":{\"type\":\"object\"}}}}}}}}}}\n"
    },
    {
      "path": "src/server.js",
      "content": "const fs = require('node:fs');\nconst path = require('node:path');\nconst http = require('node:http');\n\nfunction Todo({ id, title, done, createdAt, doneAt }) {\n  this.id = id;\n  this.title = title;\n  this.done = done;\n  this.createdAt = createdAt;\n  if (done) this.doneAt = doneAt;\n}\n\nfunction createServer({ dataPath }) {\n  let todos = [];\n\n  const loadData = () => {\n    try {\n      const data = fs.readFileSync(dataPath, 'utf8');\n      if (data.trim()) {\n        const parsed = JSON.parse(data);\n        todos = parsed.todos || [];\n      } else {\n        todos = [];\n      }\n    } catch (err) {\n      console.error('Error loading data', err);\n      todos = [];\n    }\n  };\n\n  const saveData = () => {\n    try {\n      fs.writeFileSync(dataPath, JSON.stringify({ todos }, null, 2));\n    } catch (err) {\n      console.error('Error saving data', err);\n    }\n  };\n\n  // Load initial data on server start\n  loadData();\n\n  const server = http.createServer((req, res) => {\n    const url = new URL(req.url, `http://${req.headers.host}`);\n    const path = url.pathname;\n    const method = req.method;\n\n    // CORS\n    res.setHeader('Access-Control-Allow-Origin', '*');\n    res.setHeader('Access-Control-Allow-Methods', 'GET, POST, PATCH, DELETE, OPTIONS');\n    res.setHeader('Access-Control-Allow-Headers', 'Content-Type');\n\n    if (method === 'OPTIONS') {\n      res.writeHead(200, { 'Content-Type': 'application/json' });\n      res.end(JSON.stringify({ ok: true }));\n      return;\n    }\n\n    switch (path) {\n      case '/health':\n        handleHealth(req, res);\n        break;\n      case '/openapi.json':\n        handleOpenAPI(req, res);\n        break;\n      case '/todos':\n        handleTodos(req, res);\n        break;\n      default:\n        res.writeHead(404, { 'Content-Type': 'application/json' });\n        res.end(JSON.stringify({ ok: false, error: 'Not found' }));\n    }\n  });\n\n  function handleHealth(req, res) {\n    res.writeHead(200, { 'Content-Type': 'application/json' });\n    res.end(JSON.stringify({ ok: true }));\n  }\n\n  function handleOpenAPI(req, res) {\n    // This is the OpenAPI document\n    const openapiDoc = {\n      openapi: '3.0.0',\n      info: {\n        title: 'Todo API',\n        version: '1.0.0',\n        description: 'A simple Todo API'\n      },\n      servers: [\n        {\n          url: '/'\n        }\n      ],\n      paths: {\n        '/health': {\n          get: {\n            responses: {\n              '200': {\n                description: 'OK',\n                content: {\n                  'application/json': {\n                    schema: {\n                      type: 'object',\n                      properties: {\n                        ok: { type: 'boolean' }\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        },\n        '/todos': {\n          get: {\n            responses: {\n              '200': {\n                description: 'OK',\n                content: {\n                  'application/json': {\n                    schema: {\n                      type: 'object',\n                      properties: {\n                        ok: { type: 'boolean' },\n                        todos: {\n                          type: 'array',\n                          items: {\n                            type: 'object',\n                            properties: {\n                              id: { type: 'string' },\n                              title: { type: 'string' },\n                              done: { type: 'boolean' },\n                              createdAt: { type: 'string' },\n                              doneAt: { type: 'string' }\n                            }\n                          }\n                        }\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        },\n        '/todos': {\n          post: {\n            responses: {\n              '201': {\n                description: 'Created',\n                content: {\n                  'application/json': {\n                    schema: {\n                      type: 'object',\n                      properties: {\n                        ok: { type: 'boolean' },\n                        todo: {\n                          type: 'object',\n                          properties: {\n                            id: { type: 'string' },\n                            title: { type: 'string' },\n                            done: { type: 'boolean' },\n                            createdAt: { type: 'string' },\n                            doneAt: { type: 'string' }\n                          }\n                        }\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        },\n        `/{id}`: {\n          get: {\n            responses: {\n              '200': {\n                description: 'OK',\n                content: {\n                  'application/json': {\n                    schema: {\n                      type: 'object',\n                      properties: {\n                        ok: { type: 'boolean' },\n                        todo: {\n                          type: 'object',\n                          properties: {\n                            id: { type: 'string' },\n                            title: { type: 'string' },\n                            done: { type: 'boolean' },\n                            createdAt: { type: 'string' },\n                            doneAt: { type: 'string' }\n                          }\n                        }\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        },\n        `/{id}`: {\n          delete: {\n            responses: {\n              '200': {\n                description: 'OK',\n                content: {\n                  'application/json': {\n                    schema: {\n                      type: 'object',\n                      properties: {\n                        ok: { type: 'boolean' }\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        },\n        `/{id}`: {\n          patch: {\n            responses: {\n              '200': {\n                description: 'OK',\n                content: {\n                  'application/json': {\n                    schema: {\n                      type: 'object',\n                      properties: {\n                        ok: { type: 'boolean' },\n                        todo: {\n                          type: 'object',\n                          properties: {\n                            id: { type: 'string' },\n                            title: { type: 'string' },\n                            done: { type:\n"
    },
    "content: "
  ]
}