{
  "mode": "full",
  "files": [
    {"path": "README.md", "content": ""},
    {"path": "mini_ai/__init__.py", "content": "from .markov import MarkovChain\n"},
    {"path": "mini_ai/markov.py", "content": "import json\n\n\nclass MarkovChain:\n    def __init__(self, order: int = 1):\n        self.order = order\n        self.transitions = {}\n\n    @staticmethod\n    def from_dict(d: dict) -> 'MarkovChain':\n        return MarkovChain(order=d['order'])\n\n    def to_dict(self) -> dict:\n        return {\n            "},
    {"path": "mini_ai/cli.py", "content": "}\n\nimport argparse\nfrom .markov import MarkovChain\n\n\ndef main(argv: list[str] | None = None):\n    parser = argparse.ArgumentParser()\n    subparsers = parser.add_subparsers(dest='command')\n\n    train_parser = subparsers.add_parser('train', help='Train a Markov chain model from text input and save the model to a JSON file.')\n    train_parser.add_argument('--input', type=str, required=True, help='Input text file path.')\n    train_parser.add_argument('--model-out', type=str, required=True, help='Output model file path.')\n    train_parser.add_argument('--order', type=int, default=1, help='Order of the Markov chain (default: 1).')\n\n    generate_parser = subparsers.add_parser('generate', help='Generate text using a trained Markov chain model.')\n    generate_parser.add_argument('--model', type=str, required=True, help='Model file path to use for generation.')\n    generate_parser.add_argument('--length', type=int, default=10, help='Length of the generated text (default: 10).')\n    generate_parser.add_argument('--seed', type=str, help='Seed value for deterministic generation (optional).')\n    generate_parser.add_argument('--random-seed', type=int, help='Random seed for non-deterministic generation (optional).')\n\n    args = parser.parse_args(argv)\n\n    if args.command == 'train':\n        model = MarkovChain(order=args.order)\n        with open(args.input, 'r', encoding='utf-8') as f:\n            text = f.read()\n        model.train(text)\n        with open(args.model_out, 'w', encoding='utf-8') as f:\n            json.dump(model.to_dict(), f, indent=4)\n\n    elif args.command == 'generate':\n        model = MarkovChain.from_dict(json.load(open(args.model, 'r', encoding='utf-8')))\n        generated_text = model.generate(length=args.length, seed=args.seed, random_seed=args.random_seed)\n        print(generated_text)\n\nif __name__ == '__main__':\n    main()"}
  ],
  "notes": "The MarkovChain class now includes a constructor to initialize the order and transitions dictionary. The from_dict method is added for deserialization. The cli.py script has been updated with argparse subcommands for train and generate functionalities, handling command line arguments appropriately."
}