Vytvor maly, ale realisticky Python projekt pro "AI" bez externich zavislosti.

Cil: implementuj character-level Markov chain generator (n-gram) jako balicek `mini_ai/` + dokumentace `README.md`.

POZADAVKY / KONTRAKT (musis splnit):
- Pouze standardni knihovna Pythonu (zadne numpy/pandas/sklearn/torch/tensorflow/requests).
- Modul `mini_ai/markov.py` musi obsahovat:
  - class MarkovChain(order: int = 1)
  - def train(self, text: str) -> None
  - def generate(self, length: int, seed: str | None = None, random_seed: int | None = None) -> str
  - def to_dict(self) -> dict  (JSON-serializovatelny; klice: "order", "transitions")
  - @classmethod def from_dict(cls, d: dict) -> "MarkovChain"  (nebo pouzij `from __future__ import annotations`)
- Pozor: type hinty nesmi shodit import (v Python 3.12 pouzij future-annotations nebo string forward refs).
- Reprezentace transitions v to_dict:
  - transitions: dict[context: str, dict[next_char: str, count: int]]
  - context je string delky = order.
- `mini_ai/cli.py` musi obsahovat:
  - def main(argv: list[str] | None = None) -> int  (nech argumenty pres argparse)
  - subcommand train: --input <path> --model-out <path> --order <int>
  - subcommand generate: --model <path> --length <int> [--seed <str>] [--random-seed <int>]
  - `python -m mini_ai.cli --help` musi vratit exit code 0

Poznamka: testy budeme pouzivat tyto (musis projit):
--- BEGIN ORACLE TESTS (tests/test_oracle.py) ---
import io
import json
import os
import tempfile
import unittest
from contextlib import redirect_stdout

from mini_ai.markov import MarkovChain
from mini_ai.cli import main


class TestMarkovOracle(unittest.TestCase):
    def test_order_validation(self):
        with self.assertRaises(ValueError):
            MarkovChain(order=0)

    def test_train_and_to_dict(self):
        mc = MarkovChain(order=1)
        mc.train("aba")
        d = mc.to_dict()
        self.assertEqual(d["order"], 1)
        self.assertIn("transitions", d)
        self.assertIn("a", d["transitions"])
        self.assertIn("b", d["transitions"]["a"])
        self.assertEqual(d["transitions"]["a"]["b"], 1)

    def test_round_trip_serialization(self):
        mc = MarkovChain(order=2)
        mc.train("abcd")
        d1 = mc.to_dict()
        mc2 = MarkovChain.from_dict(d1)
        d2 = mc2.to_dict()
        self.assertEqual(d1["order"], d2["order"])
        self.assertEqual(d1["transitions"], d2["transitions"])

    def test_generate_deterministic(self):
        mc = MarkovChain(order=1)
        mc.train("aba")
        out = mc.generate(length=10, seed="a", random_seed=0)
        self.assertEqual(len(out), 10)
        self.assertTrue(set(out) <= {"a", "b"})


class TestCliOracle(unittest.TestCase):
    def test_train_and_generate_smoke(self):
        with tempfile.TemporaryDirectory() as td:
            input_path = os.path.join(td, "input.txt")
            model_path = os.path.join(td, "model.json")

            with open(input_path, "w", encoding="utf-8") as f:
                f.write("aba")

            rc = main(["train", "--input", input_path, "--model-out", model_path, "--order", "1"])
            self.assertEqual(rc, 0)
            self.assertTrue(os.path.exists(model_path))

            with open(model_path, "r", encoding="utf-8") as f:
                loaded = json.load(f)
            self.assertIn("order", loaded)
            self.assertIn("transitions", loaded)

            buf = io.StringIO()
            with redirect_stdout(buf):
                rc2 = main(["generate", "--model", model_path, "--length", "12", "--seed", "a", "--random-seed", "0"])
            self.assertEqual(rc2, 0)
            generated = buf.getvalue().strip()
            self.assertEqual(len(generated), 12)
--- END ORACLE TESTS ---

VYSTUPNI FORMAT (STRICT): vrat JEN JSON objekt tohoto tvaru:
{
  "mode": "full",
  "files": [
    {"path": "README.md", "content": "...\n"},
    {"path": "mini_ai/__init__.py", "content": "...\n"},
    {"path": "mini_ai/markov.py", "content": "...\n"},
    {"path": "mini_ai/cli.py", "content": "...\n"}
  ],
  "notes": "optional"
}

Pravidla:
- Zadny markdown, zadne ``` bloky, zadny text mimo JSON.
- Cesty jsou relativni, pouzij `/`, bez `..` a bez absolutnich cest.
- Kazdy soubor ukonci znakem noveho radku.
- Nezahrnuj vlastni `tests/` (pouziji se oracle testy).
- `content` je vzdy kompletni obsah souboru (ne diff/snippet).

---
PLAN (planner: deepseek-r1:8b):
We are creating a project with the following structure:
README.md:
- A short description of the project, installation, and usage.
mini_ai/__init__.py:
- Empty or with __all__ if needed.
mini_ai/markov.py:
- Class MarkovChain with the required methods and attributes.
mini_ai/cli.py:
- Main function with argparse for command line interface.
We must ensure that the code meets the oracle tests.
Let's break down the implementation:
1. README.md:
- Project description, installation, and usage examples.
2. mini_ai/__init__.py:
- We can leave it empty or with a simple __all__ if we have multiple modules.
3. mini_ai/markov.py:
- We'll implement the MarkovChain class with the required methods.
Steps for MarkovChain:
- __init__: store order and initialize transitions (a dictionary) and maybe a counter for counts.
- train:
- We need to build the n-gram model from the text.
- We'll consider the context as the last (order-1) characters (for order n, context length is order).
- We'll traverse the text and for each position i (from order-1 to len(text)-1), the context is text[i-order+1:i] (if order>1) and the next character is text[i+1] (if we are at the last character, we don't have a next, so we skip? or we can consider the end of string as a special state? But the tests don't require that, so we'll just skip the last character for training? Actually, the test uses "aba" and order=1, so we need to handle the end.
However, note: the test `test_train_and_to_dict` uses "aba" and order=1. The transitions should be:
context "a": next char "b" with count 1
context "b": next char "a" with count 1
But note: the text "aba" has:
index0: 'a' -> context for order1 is '' (if we consider the start) but the test doesn't use start. Actually, the test expects:

---
NEPROSLO VALIDACI. Oprav nasledujici problemy.

CHYBY:
- Command failed: python -m unittest discover -v -s tests -p "test*.py" (exit=1, timedOut=false)

HARD CHECKLIST (PYTHON ORACLE):
- V `mode:"full"` zahrn README.md, mini_ai/__init__.py, mini_ai/markov.py, mini_ai/cli.py.
- `MarkovChain(order)` musi vyhodit ValueError pro order <= 0.
- Oprav syntax/indent chyby: konzistentni mezery, zejmena kolem `@classmethod` a `def from_dict`.

LOGY (zkraceno):
- python -m unittest discover -v -s tests -p "test*.py"
  stderr: "test_train_and_generate_smoke (test_oracle.TestCliOracle.test_train_and_generate_smoke) ... FAIL\r\ntest_generate_deterministic (test_oracle.TestMarkovOracle.test_generate_deterministic) ... FAIL\r\ntest_order_validation (test_oracle.TestMarkovOracle.test_order_validation) ... ok\r\ntest_round_trip_serialization (test_oracle.TestMarkovOracle.test_round_trip_serialization) ... ok\r\ntest_train_and_to_dict (test_oracle.TestMarkovOracle.test_train_and_to_dict) ... ok\r\n\r\n======================================================================\r\nFAIL: test_train_and_generate_smoke (test_oracle.TestCliOracle.test_train_and_generate_smoke)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\atrep\\Desktop\\Test_AI_Code\\shumilek\\projects\\bot_eval_run\\release_gate_after_schema_first_177179\\python-ai-stdlib-oracle_run_09\\workspace\\tests\\test_oracle.py\", line 67, in test_train_and_generate_smoke\r\n    self.assertEqual(len(generated), 12)\r\nAssertionError: 1 != 12\r\n\r\n======================================================================\r\nFAIL: test_generate_deterministic (test_oracle.TestMarkovOracle.test_generate_deterministic)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\atrep\\Desktop\\Test_AI_Code\\shumilek\\projects\\bot_eval_run\\release_gate_after_schema_first_177179\\python-ai-stdlib-oracle_run_09\\workspace\\tests\\test_oracle.py\", line 40, in test_generate_deterministic\r\n    self.assertEqual(len(out), 10)\r\nAssertionError: 1 != 10\r\n\r\n----------------------------------------------------------------------\r\nRan 5 tests in 0.005s\r\n\r\nFAILED (failures=2)\r\n"

AKTUALNI SOUBORY:
- README.md
- mini_ai/__init__.py
- mini_ai/__pycache__/__init__.cpython-312.pyc
- mini_ai/__pycache__/cli.cpython-312.pyc
- mini_ai/__pycache__/markov.cpython-312.pyc
- mini_ai/cli.py
- mini_ai/markov.py
- tests/__pycache__/test_oracle.cpython-312.pyc
- tests/test_oracle.py

DULEZITE: OPRAV SYNTAX/INDENT CHYBY PRESNE NA NIZE UVEDENYCH RADECH.
KONTEXT SYNTAX CHYB:
--- SYNTAX FILE: tests/test_oracle.py (line 67) ---
     42 | 
     43 | 
     44 | class TestCliOracle(unittest.TestCase):
     45 |     def test_train_and_generate_smoke(self):
     46 |         with tempfile.TemporaryDirectory() as td:
     47 |             input_path = os.path.join(td, "input.txt")
     48 |             model_path = os.path.join(td, "model.json")
     49 | 
     50 |             with open(input_path, "w", encoding="utf-8") as f:
     51 |                 f.write("aba")
     52 | 
     53 |             rc = main(["train", "--input", input_path, "--model-out", model_path, "--order", "1"])
     54 |             self.assertEqual(rc, 0)
     55 |             self.assertTrue(os.path.exists(model_path))
     56 | 
     57 |             with open(model_path, "r", encoding="utf-8") as f:
     58 |                 loaded = json.load(f)
     59 |             self.assertIn("order", loaded)
     60 |             self.assertIn("transitions", loaded)
     61 | 
     62 |             buf = io.StringIO()
     63 |             with redirect_stdout(buf):
     64 |                 rc2 = main(["generate", "--model", model_path, "--length", "12", "--seed", "a", "--random-seed", "0"])
     65 |             self.assertEqual(rc2, 0)
     66 |             generated = buf.getvalue().strip()
>>   67 |             self.assertEqual(len(generated), 12)
     68 | 
     69 | 
--- SYNTAX FILE: tests/test_oracle.py (line 40) ---
     15 |             MarkovChain(order=0)
     16 | 
     17 |     def test_train_and_to_dict(self):
     18 |         mc = MarkovChain(order=1)
     19 |         mc.train("aba")
     20 |         d = mc.to_dict()
     21 |         self.assertEqual(d["order"], 1)
     22 |         self.assertIn("transitions", d)
     23 |         self.assertIn("a", d["transitions"])
     24 |         self.assertIn("b", d["transitions"]["a"])
     25 |         self.assertEqual(d["transitions"]["a"]["b"], 1)
     26 | 
     27 |     def test_round_trip_serialization(self):
     28 |         mc = MarkovChain(order=2)
     29 |         mc.train("abcd")
     30 |         d1 = mc.to_dict()
     31 |         mc2 = MarkovChain.from_dict(d1)
     32 |         d2 = mc2.to_dict()
     33 |         self.assertEqual(d1["order"], d2["order"])
     34 |         self.assertEqual(d1["transitions"], d2["transitions"])
     35 | 
     36 |     def test_generate_deterministic(self):
     37 |         mc = MarkovChain(order=1)
     38 |         mc.train("aba")
     39 |         out = mc.generate(length=10, seed="a", random_seed=0)
>>   40 |         self.assertEqual(len(out), 10)
     41 |         self.assertTrue(set(out) <= {"a", "b"})
     42 | 
     43 | 
     44 | class TestCliOracle(unittest.TestCase):
     45 |     def test_train_and_generate_smoke(self):
     46 |         with tempfile.TemporaryDirectory() as td:
     47 |             input_path = os.path.join(td, "input.txt")
     48 |             model_path = os.path.join(td, "model.json")
     49 | 
     50 |             with open(input_path, "w", encoding="utf-8") as f:
     51 |                 f.write("aba")
     52 | 
     53 |             rc = main(["train", "--input", input_path, "--model-out", model_path, "--order", "1"])
     54 |             self.assertEqual(rc, 0)
     55 |             self.assertTrue(os.path.exists(model_path))
     56 | 
     57 |             with open(model_path, "r", encoding="utf-8") as f:
     58 |                 loaded = json.load(f)
     59 |             self.assertIn("order", loaded)
     60 |             self.assertIn("transitions", loaded)
     61 | 
     62 |             buf = io.StringIO()
     63 |             with redirect_stdout(buf):
     64 |                 rc2 = main(["generate", "--model", model_path, "--length", "12", "--seed", "a", "--random-seed", "0"])
     65 |             self.assertEqual(rc2, 0)
Instrukce: dodrz konzistentni odsazeni (mezery), zadne smichani blokovych urovni.

VYSTUP: vrat JEN platny JSON objekt bez markdownu:
{ "mode": "patch", "files": [ {"path":"...","content":"...\n"} ], "notes": "optional" }
Pravidla: udelej jen minimalni nutne zmeny; posli jen soubory ktere menis nebo pridavas; u kazdeho posli VZDY cely obsah souboru.