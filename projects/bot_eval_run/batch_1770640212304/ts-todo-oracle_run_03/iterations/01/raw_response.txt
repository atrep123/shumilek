{"mode": "full", "files": [{"path": "README.md", "content": "# Todo CLI\n\nA simple command-line todo list application built using TypeScript.\n\n## Usage\n\nAdd a new task:\n```sh\ntodo add \"Buy milk\" --data ./tasks.json\n```\n\nList all tasks:\n```sh\ntodo list --data ./tasks.json\n```\n\nMark a task as done:\n```sh\ntodo done <id> --data ./tasks.json\n```\n\nRemove a task:\n```sh\ntodo remove <id> --data ./tasks.json\n```\n"}, {"path": "package.json", "content": "{\n  \"name\": \"todo-cli\",\n  \"version\": \"1.0.0\",\n  \"description\": \"A simple command-line todo list application\",\n  \"main\": \"dist/cli.js\",\n  \"scripts\": {\n    \"start\": \"node dist/cli.js\"\n  },\n  \"type\": \"commonjs\",\n  \"dependencies\": {},\n  \"devDependencies\": {\n    \"typescript\": \"^4.5.2\"\n  }\n}"}, {"path": "tsconfig.json", "content": "{\n  \"compilerOptions\": {\n    \"target\": \"ES6\",\n    \"module\": \"CommonJS\",\n    \"outDir\": \"./dist\",\n    \"rootDir\": \"./src\",\n    \"strict\": true,\n    \"esModuleInterop\": true\n  },\n  \"include\": [\"src/**/*\"]\n}"}, {"path": "src/store.ts", "content": "import { v4 as uuidv4 } from 'node:crypto';\nimport fs from 'node:fs';\nimport path from 'node:path';\nexport interface Task {\nid: string;\ntitle: string;\ndone: boolean;\ncreatedAt: string;\ndoneAt?: string;\n}\nexport class TaskStore {\n  private filePath: string;\n  private tasks: Task[];\n\n  constructor(filePath: string) {\n    this.filePath = filePath;\n    if (fs.existsSync(this.filePath)) {\n      const data = fs.readFileSync(this.filePath, 'utf8');\n      this.tasks = JSON.parse(data).tasks || [];\n    } else {\n      this.tasks = [];\n    }\n  }\n\n  list(): Task[] {\n    return this.tasks;\n  }\n\n  add(title: string): Task {\n    const task: Task = {\nid: uuidv4(), title, done: false, createdAt: new Date().toISOString() };\n    this.tasks.push(task);\n    this.save();\n    return task;\n  }\n\n  done(id: string): Task | undefined {\n    const task = this.tasks.find(t => t.id === id);\n    if (task) {\n      task.done = true;\n      task.doneAt = new Date().toISOString();\n      this.save();\n    }\n    return task;\n  }\n\n  remove(id: string): Task | undefined {\n    const index = this.tasks.findIndex(t => t.id === id);\n    if (index !== -1) {\n      const removedTask = this.tasks.splice(index, 1)[0];\n      this.save();\n      return removedTask;\n    }\n    return undefined;\n  }\n\n  private save() {\n    fs.writeFileSync(this.filePath, JSON.stringify({ tasks: this.tasks }, null, 2));\n  }\n}\n"}, {"path": "src/cli.ts", "content": "import { TaskStore } from './store';\nimport process from 'node:process';\nimport fs from 'node:fs';\nconst argv = process.argv.slice(2);\nlet cmd = argv[0];\nif (cmd === '--help') {\n  console.log('Usage: todo <command> [options]');\n  console.log('Commands:\n  add <title> --data <path>    Add a new task\n  list --data <path>        List all tasks\n  done <id> --data <path>    Mark a task as done\n  remove <id> --data <path>  Remove a task');\n  process.exit(0);\n}\n\ncmd = cmd.replace(/^-+/, '');\nconst dataPath = argv.find(arg => arg.startsWith('--data')).split('=')[1];\nconst args = argv.filter(arg => !arg.startsWith('--data'));\n\nswitch (cmd) {\ncase 'add':\n  const title = args[0].replace(/^['\"](.*?)['\"]$/, '$1');\n  const store = new TaskStore(dataPath);\n  const task = store.add(title);\n  console.log({ ok: true, task });\n  break;\ncase 'list':\n  const storeList = new TaskStore(dataPath);\n  const tasks = storeList.list();\n  console.log({ ok: true, tasks });\n  break;\ncase 'done':\n  const id = args[0];\n  const storeDone = new TaskStore(dataPath);\n  const task = storeDone.done(id);\n  if (task) {\n    console.log({ ok: true, task });\n  } else {\n    console.log({ ok: false, message: 'Task not found' });\n  }\n  break;\ncase 'remove':\n  const id = args[0];\n  const storeRemove = new TaskStore(dataPath);\n  const task = storeRemove.remove(id);\n  if (task) {\n    console.log({ ok: true, task });\n  } else {\n    console.log({ ok: false, message: 'Task not found' });\n  }\n  break;\ndefault:\n  console.error('Unknown command:', cmd);\n  process.exit(1);\n}\n"}]}