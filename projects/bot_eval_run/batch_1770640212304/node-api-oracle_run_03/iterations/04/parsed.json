{
  "mode": "patch",
  "files": [
    {
      "path": "src/server.js",
      "content": "const http = require('http');\nconst url = require('url');\nconst fs = require('fs');\nconst path = require('path');\nconst crypto = require('crypto');\n\nconst server = http.createServer((req, res) => {\n  const parsedUrl = url.parse(req.url, true);\n  if (parsedUrl.pathname === '/todos' && req.method === 'GET') {\n    // List all TODOs\n    fs.readFile('todos.json', 'utf8', (err, data) => {\n      if (err) return handleError(res, err);\n      res.setHeader('Content-Type', 'application/json');\n      res.end(data);\n    });\n  } else if (parsedUrl.pathname === '/todos' && req.method === 'POST') {\n    // Create a new TODO\n    let body = '';\n    req.on('data', chunk => { body += chunk.toString(); });\n    req.on('end', () => {\n      const todo = JSON.parse(body);\n      if (!todo.title) return handleError(res, new Error('Title is required'));\n      todo.id = crypto.randomUUID();\n      fs.readFile('todos.json', 'utf8', (err, data) => {\n        if (err) return handleError(res, err);\n        const todos = JSON.parse(data).map((t) => ({ ...t }));\n        todos.push(todo);\n        fs.writeFile('todos.json', JSON.stringify(todos), 'utf8', (err) => {\n          if (err) return handleError(res, err);\n          res.statusCode = 201;\n          res.end();\n        });\n      });\n    });\n  } else {\n    // Handle other routes or methods not implemented\n    handleError(res, new Error('Not Implemented'));\n  }\n});\n\nconst handleError = (res, err) => {\n  res.statusCode = err.status || 500;\n  res.end(JSON.stringify({ ok: false, error: err.message }));\n};\n\nserver.listen(3000, () => console.log('Server running at http://localhost:3000'));"
    }
  ],
  "notes": "optional"
}