{
  "mode": "full",
  "files": [
    {
      "path": "README.md",
      "content": "# Node.js TODO API Project\n\nThis project is a simple REST API for managing TODO items, built using only Node.js builtin modules.\n\n## Features\n- **RESTful API** for CRUD operations on TODO items.\n- Persistence via JSON file.\n\n## Endpoints\n- `GET /health` -> Returns { ok: true }\n- `GET /openapi.json` -> OpenAPI 3.x specification with paths for `/todos`.\n- `GET /todos` -> List all TODOs.\n- `POST /todos` -> Create a new TODO (body should contain `{title}`).\n- `GET /todos/:id` -> Get a specific TODO by ID.\n- `PATCH /todos/:id` -> Update a specific TODO (body should contain `{done: true}`).\n- `DELETE /todos/:id` -> Delete a specific TODO.\n\n## Usage\n1. Clone the repository.\n2. Run `npm install` to install dependencies.\n3. Start the server with `node src/server.js`.\n\n## Testing\nTo run tests, use the command `node --test tests/oracle.test.js`.\n"
    },
    {
      "path": "package.json",
      "content": "{\n  \"name\": \"todo-api\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Simple TODO API using Node.js builtin modules\",\n  \"main\": \"src/server.js\",\n  \"type\": \"commonjs\",\n  \"scripts\": {\n    \"start\": \"node src/server.js\"\n  },\n  \"dependencies\": {}\n}"
    },
    {
      "path": "openapi.json",
      "content": "{\n  \"openapi\": \"3.0.0\",\n  \"info\": {\n    \"title\": \"TODO API\",\n    \"version\": \"1.0.0\"\n  },\n  \"paths\": {\n    \"/todos\": {\n      \"get\": {\n        \"summary\": \"List all TODOs\",\n        \"responses\": {\n          \"200\": {\n            \"description\": \"A list of TODOs.\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {\n                  \"type\": \"array\",\n                  \"items\": {\n                    \"$ref\": \"#/components/schemas/Todo\"\n                  }\n                }\n              }\n            }\n          }\n        }\n      },\n      \"post\": {\n        \"summary\": \"Create a new TODO\",\n        \"requestBody\": {\n          \"required\": true,\n          \"content\": {\n            \"application/json\": {\n              \"schema\": {\n                \"$ref\": \"#/components/schemas/Todo\"\n              }\n            }\n          }\n        },\n        \"responses\": {\n          \"201\": {\n            \"description\": \"TODO created successfully.\"\n          },\n          \"400\": {\n            \"description\": \"Invalid input data.\"\n          }\n        }\n      }\n    }\n  },\n  \"components\": {\n    \"schemas\": {\n      \"Todo\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"id\": {\n            \"type\": \"string\"\n          },\n          \"title\": {\n            \"type\": \"string\"\n          },\n          \"completed\": {\n            \"type\": \"boolean\"\n          }\n        },\n        \"required\": [\"title\"]\n      }\n    }\n  }\n}"
    },
    {
      "path": "src/server.js",
      "content": "const http = require('http');\nconst url = require('url');\nconst fs = require('fs');\nconst path = require('path');\nconst { v4: uuidv4 } = require('uuid');\n\nconst server = http.createServer((req, res) => {\n  const parsedUrl = url.parse(req.url, true);\n  if (parsedUrl.pathname === '/todos' && req.method === 'GET') {\n    // List all TODOs\n    fs.readFile('todos.json', 'utf8', (err, data) => {\n      if (err) return handleError(res, err);\n      res.setHeader('Content-Type', 'application/json');\n      res.end(data);\n    });\n  } else if (parsedUrl.pathname === '/todos' && req.method === 'POST') {\n    // Create a new TODO\n    let body = '';\n    req.on('data', chunk => { body += chunk.toString(); });\n    req.on('end', () => {\n      const todo = JSON.parse(body);\n      if (!todo.title) return handleError(res, new Error('Title is required'));\n      todo.id = uuidv4();\n      fs.readFile('todos.json', 'utf8', (err, data) => {\n        if (err) return handleError(res, err);\n        const todos = JSON.parse(data).map((t) => ({ ...t }));\n        todos.push(todo);\n        fs.writeFile('todos.json', JSON.stringify(todos), 'utf8', (err) => {\n          if (err) return handleError(res, err);\n          res.statusCode = 201;\n          res.end();\n        });\n      });\n    });\n  } else {\n    // Handle other routes or methods not implemented\n    handleError(res, new Error('Not Implemented'));\n  }\n});\n\nconst handleError = (res, err) => {\n  res.statusCode = err.status || 500;\n  res.end(JSON.stringify({ ok: false, error: err.message }));\n};\n\nserver.listen(3000, () => console.log('Server running at http://localhost:3000'));"
    }
  ],
  "notes": "optional"
}