{
  "plan": "We are creating a Node.js project with the following structure:\n\n- mode: \"full\"\n- files: [\n    {\"path\": \"package.json\", \"content\": \"{\\\"type\\\": \\\"commonjs\\\"}\"},\n    {\"path\": \"src/server.js\", \"content\": \"const { createServer } = require('http'); const fs = require('fs'); const path = require('path'); const crypto = require('crypto'); function createServer({ dataPath }) {\n  let todos = []; try {\n    const data = fs.readFileSync(dataPath);\n    todos = JSON.parse(data);\n  } catch (err) {\n    // If the file doesn't exist, we'll create it later (empty array)\n  }\n\n  const server = createServer((req, res) => {\n    let body = '';\n    req.on('data', chunk => {\n      body += chunk.toString();\n    });\n    req.on('end', () => {\n      // Parse the body\n      if (method === 'GET' && path === '/health') {\n        sendResponse(res, 200, { message: 'OK' });\n      } else if (method === 'GET' && path === '/openapi.json') {\n        sendResponse(res, 200, { openapi: '3.0.1', info: { title: 'TODO API', version: '1.0.0' }, paths: { '/todos': { get: { responses: { '200': { description: 'OK', content: { 'application/json': { schema: { type: 'array', items: { type: 'object', properties: { id: { type: 'string' }, title: { type: 'string' }, done: { type: 'boolean' } } } } } } } } } } } });\n      } else if (method === 'GET' && path.startsWith('/todos/')) {\n        const id = path.split('/').pop();\n        const todo = todos.find(todo => todo.id === id);\n        if (todo) sendResponse(res, 200, todo); else sendResponse(res, 404, { message: 'Not Found' });\n      } else if (method === 'GET' && path === '/todos') {\n        sendResponse(res, 200, todos);\n      } else if (method === 'POST' && path === '/todos') {\n        const parsedBody = JSON.parse(body);\n        if (!parsedBody.title) return sendResponse(res, 400, { message: 'Bad Request', errors: ['title is required'] });\n        const id = crypto.randomUUID();\n        todos.push({ id, title: parsedBody.title, done: false });\n        fs.writeFileSync(dataPath, JSON.stringify(todos));\n        sendResponse(res, 201, { message: 'Created', id });\n      } else if (method === 'PATCH' && path.startsWith('/todos/')) {\n        const id = path.split('/').pop();\n        const todoIndex = todos.findIndex(todo => todo.id === id);\n        if (todoIndex === -1) return sendResponse(res, 404, { message: 'Not Found' });\n        const parsedBody = JSON.parse(body);\n        if (!parsedBody.done) return sendResponse(res, 400, { message: 'Bad Request', errors: ['done is required'] });\n        todos[todoIndex].done = parsedBody.done;\n        fs.writeFileSync(dataPath, JSON.stringify(todos));\n        sendResponse(res, 200, { message: 'Updated' });\n      } else if (method === 'DELETE' && path.startsWith('/todos/')) {\n        const id = path.split('/').pop();\n        todos = todos.filter(todo => todo.id !== id);\n        fs.writeFileSync(dataPath, JSON.stringify(todos));\n        sendResponse(res, 204, { message: 'Deleted' });\n      }\n    });\n  }); return server;\n}\nfunction sendResponse(res, status, data) {\n  res.statusCode = status;\n  res.setHeader('Content-Type', 'application/json');\n  res.end(JSON.stringify(data));\n}\")},\n    {\"path\": \"openapi.json\", \"content\": \"{\\\"openapi\\\": \\\"3.0.1\\\", \\\"info\\\": {\\\"title\\\": \\\"TODO API\\\", \\\"version\\\": \\\"1.0.0\\\"}, \\\"paths\\\": {\\\"/todos\\\": {\\\"get\\\": {\\\"responses\\\": {\\\"200\\\": {\\\"description\\\": \\\"OK\\\", \\\"content\\\": {\\\"application/json\\\": {\\\"schema\\\": {\\\"type\\\": \\\"array\\\", \\\"items\\\": {\\\"type\\\": \\\"object\\\", \\\"properties\\\": {\\\"id\\\": {\\\"type\\\": \\\"string\\\"}, \\\"title\\\": {\\\"type\\\": \\\"string\\\"}, \\\"done\\\": {\\\"type\\\": \\\"boolean\\\"}}}}}}}}}}}}}\"},\n    {\"path\": \"README.md\", \"content\": \"# TODO API\nThis is a simple Node.js project that implements a RESTful API for managing TODO items.\n\n## Usage\n1. Install dependencies: `npm install`\n2. Start the server: `node src/server.js`\n3. Use any HTTP client (e.g., Postman) to send requests to the following endpoints:\n- GET /health: Returns a simple health check response.\n- GET /openapi.json: Returns the OpenAPI specification for the API.\n- GET /todos: Returns all TODO items.\n- GET /todos/:id: Returns a specific TODO item by ID.\n- POST /todos: Creates a new TODO item. Requires a `title` field in the request body.\n- PATCH /todos/:id: Updates a specific TODO item's `done` status. Requires a `done` field in the request body.\n- DELETE /todos/:id: Deletes a specific TODO item by ID.\n\n## Notes\n- The server uses the `http` module and handles requests with callbacks.\n- Error responses are sent as JSON objects with appropriate HTTP status codes.\n- The API follows the OpenAPI 3.0 specification.\n\"}\n]\n"
}